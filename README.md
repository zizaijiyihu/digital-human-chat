# æ•°å­—äººå¤šæ¨¡æ€å¯¹è¯ç³»ç»Ÿ

<div align="center">

ä¸€ä¸ªåŸºäºé˜¿é‡Œäº‘ Qwen3-Omni å¤šæ¨¡æ€å¤§æ¨¡å‹çš„å®æ—¶æ•°å­—äººå¯¹è¯ç³»ç»Ÿã€‚æ”¯æŒè§†é¢‘è¾“å…¥ã€è¯­éŸ³è¾“å‡ºï¼Œä»¥åŠæ™ºèƒ½è§†é¢‘é€šè¯æ¨¡å¼ã€‚

[åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§) â€¢ [åœ¨çº¿æ¼”ç¤º](#åœ¨çº¿æ¼”ç¤º) â€¢ [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹) â€¢ [æŠ€æœ¯æ¶æ„](#æŠ€æœ¯æ¶æ„) â€¢ [API æ–‡æ¡£](#api-æ–‡æ¡£)

</div>

---

## åŠŸèƒ½ç‰¹æ€§

### ğŸ¥ å¤šæ¨¡æ€äº¤äº’
- **è§†é¢‘å¯¹è¯** - æŒ‰ä½æŒ‰é’®å½•åˆ¶è§†é¢‘ï¼Œæ¾å¼€è‡ªåŠ¨å‘é€å¹¶è·å¾— AI å›å¤
- **å›¾ç‰‡å¯¹è¯** - æ”¯æŒä¸Šä¼ å›¾ç‰‡è¿›è¡Œè§†è§‰ç†è§£å¯¹è¯
- **éŸ³é¢‘å¯¹è¯** - æ”¯æŒå½•åˆ¶éŸ³é¢‘è¿›è¡Œè¯­éŸ³å¯¹è¯
- **è§†é¢‘é€šè¯æ¨¡å¼** - æ™ºèƒ½è§†é¢‘è‡ªåŠ¨é‡‡é›†ï¼Œå®æ—¶æ£€æµ‹ç”¨æˆ·è¯´è¯å¹¶è‡ªåŠ¨å‘é€

### ğŸ‘¤ æ•°å­—äººå±•ç¤º
- **å®æ—¶å£å‹åŒæ­¥** - åŸºäºéŸ³é¢‘è‡ªåŠ¨ç”Ÿæˆå£å‹åŠ¨ç”»
- **æµå¼éŸ³é¢‘æ’­æ”¾** - ä½å»¶è¿Ÿçš„éŸ³é¢‘æµå¼ä¼ è¾“å’Œæ’­æ”¾
- **è‡ªç„¶è¡¨æƒ…åŠ¨ç”»** - å¾…æœºæ—¶çš„å¾®è¡¨æƒ…ã€çœ¨çœ¼ç­‰è‡ªç„¶åŠ¨ä½œ
- **3D æ¸²æŸ“** - åŸºäº Three.js çš„é«˜è´¨é‡ 3D æ•°å­—äººæ¨¡å‹

### ğŸ¤– AI èƒ½åŠ›
- **å¤šæ¨¡æ€ç†è§£** - æ”¯æŒè§†é¢‘ã€å›¾ç‰‡ã€æ–‡æœ¬ã€éŸ³é¢‘çš„å¤šæ¨¡æ€è¾“å…¥
- **è¯­éŸ³åˆæˆ** - è‡ªç„¶æµç•…çš„è¯­éŸ³è¾“å‡º
- **ä¸Šä¸‹æ–‡å¯¹è¯** - ä¿æŒå¯¹è¯å†å²ï¼Œæ”¯æŒè¿ç»­å¯¹è¯
- **æµå¼å“åº”** - å®æ—¶è¿”å› AI ç”Ÿæˆçš„éŸ³é¢‘æµ

### ğŸ¯ è§†é¢‘é€šè¯æ¨¡å¼ç‰¹æ€§
- **æ™ºèƒ½è¯­éŸ³æ£€æµ‹ (VAD)** - è‡ªåŠ¨æ£€æµ‹ç”¨æˆ·è¯´è¯ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œ
- **å¾ªç¯ç¼“å†²å½•åˆ¶** - ä¿ç•™è¯´è¯å‰çš„ä¸Šä¸‹æ–‡ç”»é¢
- **åŠ¨æ€é˜ˆå€¼è‡ªé€‚åº”** - è‡ªåŠ¨é€‚åº”ç¯å¢ƒå™ªéŸ³
- **å®¹é”™æœºåˆ¶** - è‡ªåŠ¨è·³è¿‡æŸåçš„è§†é¢‘ç‰‡æ®µ

---

## åœ¨çº¿æ¼”ç¤º

> æ³¨ï¼šéœ€è¦å…è®¸æ‘„åƒå¤´å’Œéº¦å…‹é£æƒé™

[åœ¨çº¿æ¼”ç¤ºåœ°å€](æ‚¨çš„æ¼”ç¤ºåœ°å€)

æˆ–è€…æœ¬åœ°è¿è¡Œï¼š

```bash
git clone https://github.com/your-username/digital-human-chat.git
cd digital-human-chat
pip install -r requirements.txt
export API_KEY=your_api_key
python app.py
```

è®¿é—® http://localhost:5001

---

## å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Python 3.8+
- FFmpegï¼ˆç”¨äºè§†é¢‘æ ¼å¼è½¬æ¢ï¼‰
- é˜¿é‡Œäº‘ API Keyï¼ˆ[è·å–åœ°å€](https://dashscope.console.aliyun.com/apiKey)ï¼‰

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/your-username/digital-human-chat.git
cd digital-human-chat

# åˆå§‹åŒ–æ•°å­—äººç»„ä»¶å­æ¨¡å—
git submodule update --init --recursive
```

### 2. å®‰è£…ä¾èµ–

```bash
# å®‰è£… Python ä¾èµ–
pip install -r requirements.txt

# å®‰è£… FFmpeg
# macOS
brew install ffmpeg

# Ubuntu/Debian
sudo apt-get install ffmpeg

# Windows
# ä» https://ffmpeg.org/download.html ä¸‹è½½å¹¶æ·»åŠ åˆ° PATH
```

### 3. é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ API Key
# API_KEY=your_api_key_here
```

æˆ–è€…ç›´æ¥å¯¼å‡ºç¯å¢ƒå˜é‡ï¼š

```bash
export API_KEY=your_api_key_here
```

### 4. å¯åŠ¨æœåŠ¡

```bash
python app.py
```

è®¿é—® http://localhost:5001ï¼Œå¼€å§‹ä½¿ç”¨ï¼

---

## ä½¿ç”¨æ–¹æ³•

### æ™®é€šè§†é¢‘å¯¹è¯

1. ç‚¹å‡» **"å¼€å¯æ‘„åƒå¤´"** æŒ‰é’®å…è®¸æ‘„åƒå¤´æƒé™
2. **æŒ‰ä½** "æŒ‰ä½å½•åˆ¶ï¼Œæ¾å¼€å‘é€" æŒ‰é’®å¼€å§‹å½•åˆ¶è§†é¢‘
3. **æ¾å¼€** æŒ‰é’®è‡ªåŠ¨å‘é€è§†é¢‘åˆ° AI
4. ç­‰å¾…æ•°å­—äººå“åº”å¹¶æ’­æ”¾è¯­éŸ³

### è§†é¢‘é€šè¯æ¨¡å¼ï¼ˆæ¨èï¼‰

1. ç‚¹å‡» **"ğŸ“¹ è¿›å…¥è§†é¢‘é€šè¯"** æŒ‰é’®
2. å…è®¸æ‘„åƒå¤´å’Œéº¦å…‹é£æƒé™
3. ç³»ç»Ÿä¼šè‡ªåŠ¨æ ¡å‡†ç¯å¢ƒå™ªéŸ³ï¼ˆçº¦ 3 ç§’ï¼‰
4. ç›´æ¥å¯¹ç€æ‘„åƒå¤´è¯´è¯ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹å¹¶å‘é€
5. AI å›å¤ä¼šé€šè¿‡æ•°å­—äººè¯­éŸ³æ’­æ”¾

**è§†é¢‘é€šè¯æ¨¡å¼ç‰¹ç‚¹**ï¼š
- æ— éœ€æ‰‹åŠ¨æŒ‰é’®ï¼Œè‡ªåŠ¨æ£€æµ‹è¯´è¯
- ä¿ç•™è¯´è¯å‰ 10 ç§’çš„ç”»é¢ä½œä¸ºä¸Šä¸‹æ–‡
- æ™ºèƒ½è¿‡æ»¤çŸ­å£°éŸ³å’Œå™ªéŸ³ï¼ˆæœ€å°è¯´è¯æ—¶é•¿ 900msï¼‰
- è‡ªé€‚åº”ç¯å¢ƒå™ªéŸ³å˜åŒ–

### å›¾ç‰‡å¯¹è¯

1. ç‚¹å‡» **"å‘é€å›¾ç‰‡"** æŒ‰é’®
2. é€‰æ‹©è¦åˆ†æçš„å›¾ç‰‡
3. AI ä¼šç†è§£å›¾ç‰‡å†…å®¹å¹¶è¯­éŸ³å›å¤

### éŸ³é¢‘å¯¹è¯

1. ç‚¹å‡» **"å¼€å§‹å½•éŸ³"** æŒ‰é’®
2. è¯´è¯å®Œæ¯•åç‚¹å‡» **"åœæ­¢å½•éŸ³"**
3. éŸ³é¢‘ä¼šè‡ªåŠ¨å‘é€å¹¶è·å¾—è¯­éŸ³å›å¤

---

## æŠ€æœ¯æ¶æ„

### ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         å‰ç«¯ (Browser)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  æ•°å­—äººç»„ä»¶ (digital-human-component)                 â”‚   â”‚
â”‚  â”‚  - Three.js 3D æ¸²æŸ“                                   â”‚   â”‚
â”‚  â”‚  - è§†é¢‘è‡ªåŠ¨é‡‡é›† (VideoAutoCaptureManager)            â”‚   â”‚
â”‚  â”‚  - è¯­éŸ³æ´»åŠ¨æ£€æµ‹ (SpeechDetector)                     â”‚   â”‚
â”‚  â”‚  - éŸ³é¢‘æµå¼æ’­æ”¾ (AudioStreamQueue)                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â†• HTTP/Fetch                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      åç«¯ (Flask)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  è§†é¢‘å¤„ç†                                           â”‚     â”‚
â”‚  â”‚  - WebM â†’ MP4 è½¬æ¢ (FFmpeg)                        â”‚     â”‚
â”‚  â”‚  - å¤šè§†é¢‘ç‰‡æ®µåˆå¹¶                                   â”‚     â”‚
â”‚  â”‚  - Base64 ç¼–ç                                       â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  éŸ³é¢‘å¤„ç†                                           â”‚     â”‚
â”‚  â”‚  - PCM â†’ WAV è½¬æ¢                                  â”‚     â”‚
â”‚  â”‚  - æµå¼éŸ³é¢‘ä¼ è¾“                                     â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                          â†• OpenAI SDK                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              é˜¿é‡Œäº‘ Qwen3-Omni API                           â”‚
â”‚  - å¤šæ¨¡æ€è¾“å…¥ï¼ˆè§†é¢‘/å›¾ç‰‡/éŸ³é¢‘/æ–‡æœ¬ï¼‰                         â”‚
â”‚  - æµå¼éŸ³é¢‘è¾“å‡ºï¼ˆPCM/WAVï¼‰                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆ

#### åç«¯
- **Flask** - Python Web æ¡†æ¶
- **OpenAI SDK** - å…¼å®¹é˜¿é‡Œäº‘ API çš„å®¢æˆ·ç«¯
- **FFmpeg** - è§†é¢‘æ ¼å¼è½¬æ¢å’Œåˆå¹¶
- **Qwen3-Omni-Flash** - é˜¿é‡Œäº‘å¤šæ¨¡æ€å¤§æ¨¡å‹

#### å‰ç«¯
- **Three.js** - 3D æ•°å­—äººæ¸²æŸ“
- **digital-human-component** - å¼€æºæ•°å­—äººç»„ä»¶
- **MediaRecorder API** - æµè§ˆå™¨è§†é¢‘/éŸ³é¢‘å½•åˆ¶
- **Web Audio API** - éŸ³é¢‘å¤„ç†å’Œå¯è§†åŒ–

#### æ ¸å¿ƒç®—æ³•
- **VAD (Voice Activity Detection)** - è¯­éŸ³æ´»åŠ¨æ£€æµ‹
  - åŠ¨æ€é˜ˆå€¼è‡ªé€‚åº”
  - é¢„æ¿€æ´»æœºåˆ¶ï¼ˆé™ä½å»¶è¿Ÿï¼‰
  - å™ªéŸ³åŸºå‡†è‡ªåŠ¨æ ¡å‡†
- **å¾ªç¯ç¼“å†²** - è§†é¢‘ç»„å¾ªç¯å½•åˆ¶
- **æµå¼éŸ³é¢‘** - HTTP Chunked Transfer + AudioStreamQueue

---

## é¡¹ç›®ç»“æ„

```
digital-human-chat/
â”œâ”€â”€ app.py                          # Flask åç«¯æœåŠ¡
â”œâ”€â”€ requirements.txt                # Python ä¾èµ–
â”œâ”€â”€ .env.example                    # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ .gitignore                      # Git å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ README.md                       # é¡¹ç›®æ–‡æ¡£
â”‚
â”œâ”€â”€ static/                         # å‰ç«¯é™æ€æ–‡ä»¶
â”‚   â”œâ”€â”€ index.html                 # ä¸»é¡µé¢
â”‚   â”œâ”€â”€ app.js                     # å‰ç«¯é€»è¾‘
â”‚   â””â”€â”€ style.css                  # æ ·å¼æ–‡ä»¶
â”‚
â”œâ”€â”€ test/                          # æµ‹è¯•æ–‡ä»¶ï¼ˆä¸æäº¤åˆ° gitï¼‰
â”‚   â”œâ”€â”€ audios/                   # æµ‹è¯•éŸ³é¢‘
â”‚   â””â”€â”€ videos/                   # æµ‹è¯•è§†é¢‘
â”‚
â””â”€â”€ digital-human-component/       # æ•°å­—äººç»„ä»¶ï¼ˆgit submoduleï¼‰
    â”œâ”€â”€ src/                       # ç»„ä»¶æºç 
    â”œâ”€â”€ examples/                  # ç¤ºä¾‹ä»£ç 
    â””â”€â”€ README.md                  # ç»„ä»¶æ–‡æ¡£
```

---

## API æ–‡æ¡£

### 1. è§†é¢‘å¯¹è¯ï¼ˆæ™®é€šæ¨¡å¼ï¼‰

**ç«¯ç‚¹**: `POST /api/chat`

**è¯·æ±‚**:
```http
POST /api/chat
Content-Type: multipart/form-data

video: <WebM è§†é¢‘æ–‡ä»¶>
```

**å“åº”**:
```json
{
  "success": true,
  "text": "AI å›å¤çš„æ–‡æœ¬å†…å®¹",
  "hasAudio": true,
  "audio": "base64 ç¼–ç çš„éŸ³é¢‘æ•°æ®"
}
```

### 2. è§†é¢‘å¯¹è¯ï¼ˆæµå¼æ¨¡å¼ï¼‰

**ç«¯ç‚¹**: `POST /api/chat-streaming`

**è¯·æ±‚**: åŒä¸Š

**å“åº”**:
- Content-Type: `application/octet-stream`
- æµå¼è¿”å› WAV éŸ³é¢‘ç‰‡æ®µ
- å¯ç›´æ¥ä¼ å…¥æ•°å­—äººç»„ä»¶çš„ `speakStreaming()` æ–¹æ³•

### 3. è§†é¢‘è‡ªåŠ¨é‡‡é›†å¯¹è¯

**ç«¯ç‚¹**: `POST /api/video-auto-chat`

**è¯·æ±‚**:
```http
POST /api/video-auto-chat
Content-Type: multipart/form-data

videos: <å¤šä¸ª WebM è§†é¢‘ç‰‡æ®µ>
```

**å¤„ç†æµç¨‹**:
1. æ¥æ”¶å¤šä¸ªè§†é¢‘ç‰‡æ®µï¼ˆbefore-speaking + speakingï¼‰
2. è½¬æ¢æ‰€æœ‰ WebM ä¸º MP4ï¼ˆè·³è¿‡æŸåç‰‡æ®µï¼‰
3. ä½¿ç”¨ FFmpeg concat åˆå¹¶ä¸ºå•ä¸ªè§†é¢‘
4. å‘é€åˆ° AI å¹¶æµå¼è¿”å›éŸ³é¢‘

**å“åº”**: æµå¼éŸ³é¢‘ï¼ˆåŒä¸Šï¼‰

### 4. å›¾ç‰‡å¯¹è¯

**ç«¯ç‚¹**: `POST /api/image-chat`

**è¯·æ±‚**:
```http
POST /api/image-chat
Content-Type: multipart/form-data

image: <å›¾ç‰‡æ–‡ä»¶>
```

**å“åº”**: åŒè§†é¢‘å¯¹è¯

### 5. éŸ³é¢‘å¯¹è¯ï¼ˆæµå¼ï¼‰

**ç«¯ç‚¹**: `POST /api/audio-chat-streaming`

**è¯·æ±‚**:
```http
POST /api/audio-chat-streaming
Content-Type: multipart/form-data

audio: <WebM éŸ³é¢‘æ–‡ä»¶>
```

**å“åº”**: æµå¼éŸ³é¢‘

---

## é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

| å˜é‡å | å¿…éœ€ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|--------|------|
| `API_KEY` | âœ… | - | é˜¿é‡Œäº‘ API Key |
| `API_BASE` | âŒ | `https://dashscope.aliyuncs.com/compatible-mode/v1` | API åŸºç¡€ URL |
| `MODEL` | âŒ | `qwen3-omni-flash` | ä½¿ç”¨çš„æ¨¡å‹ |
| `AUDIO_FORMAT` | âŒ | `wav` | éŸ³é¢‘æ ¼å¼ï¼ˆ`wav` æˆ– `mp3`ï¼‰ |

### è§†é¢‘é€šè¯æ¨¡å¼å‚æ•°

å¯åœ¨ [static/app.js](static/app.js#L527-L543) ä¸­è°ƒæ•´ï¼š

```javascript
await avatar.enableVideoAutoCapture({
    // è§†é¢‘å½•åˆ¶é…ç½®
    maxGroups: 2,                   // ä¿ç•™ 2 ç»„èƒŒæ™¯è§†é¢‘ï¼ˆæ¯ç»„ 5 ç§’ï¼‰
    groupDuration: 5000,            // æ¯ç»„è§†é¢‘æ—¶é•¿
    maxRecordDuration: 60000,       // æœ€é•¿å½•åˆ¶ 60 ç§’

    // VAD åŸºç¡€é…ç½®
    speechThreshold: 30,            // åŸºç¡€é˜ˆå€¼
    silenceDuration: 2000,          // é™éŸ³ 2 ç§’ååœæ­¢å½•åˆ¶
    minSpeakDuration: 900,          // æœ€å°è¯´è¯æ—¶é•¿ 900ms

    // VAD é«˜çº§é…ç½®ï¼ˆè‡ªåŠ¨æ ¡å‡†ï¼‰
    calibrationDuration: 3000,      // æ ¡å‡†æ—¶é•¿ 3 ç§’
    noiseUpdateInterval: 10000,     // æ¯ 10 ç§’æ›´æ–°èƒŒæ™¯å™ªéŸ³
    minThreshold: 20,               // åŠ¨æ€é˜ˆå€¼æœ€å°å€¼
    lowThresholdMultiplier: 1.5,    // é¢„æ¿€æ´»é˜ˆå€¼å€æ•°
    highThresholdMultiplier: 3.0,   // ç¡®è®¤è¯´è¯é˜ˆå€¼å€æ•°
});
```

**å‚æ•°è°ƒä¼˜å»ºè®®**:

- **æ›´æ•æ„Ÿ**ï¼ˆå®¹æ˜“è§¦å‘ï¼‰: é™ä½ `minSpeakDuration` (600-800ms), `minThreshold` (15-18)
- **æ›´ä¿å®ˆ**ï¼ˆå‡å°‘è¯¯è§¦å‘ï¼‰: æé«˜ `minSpeakDuration` (1000-1200ms), `minThreshold` (22-25)
- **å˜ˆæ‚ç¯å¢ƒ**: æé«˜ `minThreshold` (25-30), `minSpeakDuration` (1000ms)
- **å®‰é™ç¯å¢ƒ**: é™ä½ `minThreshold` (15-18) æˆ–è®¾ä¸º 0ï¼ˆå®Œå…¨ä¾èµ–åŠ¨æ€è®¡ç®—ï¼‰

---

## æ•…éšœæ’é™¤

### æ‘„åƒå¤´æ— æ³•è®¿é—®
- âœ… æ£€æŸ¥æµè§ˆå™¨æƒé™è®¾ç½®
- âœ… ç¡®ä¿ä½¿ç”¨ HTTPS æˆ– localhost
- âœ… æ£€æŸ¥æ˜¯å¦æœ‰å…¶ä»–ç¨‹åºå ç”¨æ‘„åƒå¤´

### è§†é¢‘é€šè¯æ¨¡å¼ä¸è§¦å‘
- âœ… æ£€æŸ¥éº¦å…‹é£æƒé™æ˜¯å¦å…è®¸
- âœ… ç­‰å¾… 3 ç§’æ ¡å‡†å®Œæˆ
- âœ… å°è¯•è¯´è¯æ—¶é—´è¶…è¿‡ 900ms
- âœ… åœ¨æ§åˆ¶å°æŸ¥çœ‹ VAD è°ƒè¯•æ—¥å¿—

### FFmpeg è½¬æ¢å¤±è´¥
- âœ… ç¡®ä¿ FFmpeg å·²æ­£ç¡®å®‰è£…ï¼ˆ`ffmpeg -version`ï¼‰
- âœ… æ£€æŸ¥æœåŠ¡å™¨æ—¥å¿—ä¸­çš„è¯¦ç»†é”™è¯¯ä¿¡æ¯
- âœ… æŸäº›è§†é¢‘ç‰‡æ®µæŸåä¼šè¢«è‡ªåŠ¨è·³è¿‡ï¼ˆå®¹é”™æœºåˆ¶ï¼‰

### éŸ³é¢‘æ— æ³•æ’­æ”¾
- âœ… æ£€æŸ¥æµè§ˆå™¨éŸ³é¢‘æƒé™
- âœ… ç¡®è®¤æœåŠ¡å™¨è¿”å›äº†æœ‰æ•ˆéŸ³é¢‘ï¼ˆæŸ¥çœ‹ç½‘ç»œè¯·æ±‚ï¼‰
- âœ… æ£€æŸ¥ API_KEY æ˜¯å¦æ­£ç¡®é…ç½®

### API Key é”™è¯¯
```
ValueError: è¯·è®¾ç½®ç¯å¢ƒå˜é‡ API_KEY
```
- âœ… ç¡®ä¿å·²è®¾ç½® `API_KEY` ç¯å¢ƒå˜é‡
- âœ… æ£€æŸ¥ `.env` æ–‡ä»¶æ˜¯å¦æ­£ç¡®é…ç½®
- âœ… ç¡®è®¤ API Key æœ‰æ•ˆä¸”æœ‰è¶³å¤Ÿé¢åº¦

---

## å¼€å‘æŒ‡å—

### è¿è¡Œå¼€å‘æœåŠ¡å™¨

```bash
# å¯ç”¨ Flask è°ƒè¯•æ¨¡å¼
export FLASK_ENV=development
python app.py
```

### è°ƒè¯•è§†é¢‘å¤„ç†

åœ¨ [app.py](app.py) ä¸­å·²åŒ…å«è¯¦ç»†çš„è°ƒè¯•æ—¥å¿—ï¼š

```python
# æŸ¥çœ‹è§†é¢‘å¤„ç†è¿‡ç¨‹
print('ğŸ“¦ æ”¶åˆ°è§†é¢‘ç‰‡æ®µ:', len(video_data), 'bytes')
print('ğŸ”„ å¼€å§‹ FFmpeg è½¬æ¢...')
print('âœ… è½¬æ¢æˆåŠŸï¼Œè¾“å‡ºå¤§å°:', len(mp4_data), 'bytes')
```

### è°ƒè¯• VADï¼ˆè¯­éŸ³æ£€æµ‹ï¼‰

åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­æŸ¥çœ‹ VAD æ—¥å¿—ï¼š

```javascript
// æŸ¥çœ‹å™ªéŸ³åŸºå‡†
console.log('[VAD] å™ªéŸ³åŸºå‡†:', noiseBaseline);

// æŸ¥çœ‹è¯´è¯æ£€æµ‹
console.log('[VAD] è¯´è¯å¼€å§‹:', startTime);
console.log('[VAD] è¯´è¯æ—¶é•¿:', duration);
```

### è‡ªå®šä¹‰æ•°å­—äººæ¨¡å‹

æ›¿æ¢ [static/app.js](static/app.js) ä¸­çš„æ¨¡å‹ URLï¼š

```javascript
avatar = new DigitalHumanAvatar({
    modelPath: 'your-custom-model.glb',
    // ...å…¶ä»–é…ç½®
});
```

---

## è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

---

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

---

## è‡´è°¢

- [é˜¿é‡Œäº‘ DashScope](https://dashscope.aliyun.com/) - æä¾›å¼ºå¤§çš„å¤šæ¨¡æ€ AI èƒ½åŠ›
- [Qwen3-Omni](https://github.com/QwenLM/Qwen) - å¤šæ¨¡æ€å¤§æ¨¡å‹
- [digital-human-component](https://github.com/zizaijiyihu/digital-human-component) - å¼€æºæ•°å­—äººç»„ä»¶
- [Three.js](https://threejs.org/) - 3D æ¸²æŸ“å¼•æ“

---

## è”ç³»æ–¹å¼

- ä½œè€…ï¼šYour Name
- é‚®ç®±ï¼šyour.email@example.com
- é¡¹ç›®åœ°å€ï¼šhttps://github.com/your-username/digital-human-chat
- é—®é¢˜åé¦ˆï¼šhttps://github.com/your-username/digital-human-chat/issues

---

<div align="center">

**å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸€ä¸ª â­ Starï¼**

Made with â¤ï¸ by Your Name

</div>
